# S16 Predictor v2.1 æ›´æ–°å®Œæˆ

**æ›´æ–°æ—¥æœŸ**: 2026-01-07
**ç‰ˆæœ¬**: v2.0 â†’ v2.1

---

## âœ… å®Œæˆçš„æ”¹åŠ¨

### 1. æ–°å¢ž Probability åˆ—
- **ä½ç½®**: åŠŸèƒ½æ±‡æ€»è¡¨ï¼Œä½äºŽ `Dominant_Contributor` ä¹‹å‰
- **å«ä¹‰**: åŠŸèƒ½åœ¨ç§ç¾¤ä¸­å­˜åœ¨çš„å¯èƒ½æ€§ (0-1)
- **è®¡ç®—**: ç»¼åˆè€ƒè™‘ RA%ã€ç½®ä¿¡åº¦ã€å®¿ä¸»åŒ¹é…ã€è¯æ®è´¨é‡ã€åˆ†ç±»å•å…ƒæ•°é‡

### 2. ä¿®æ”¹è¾“å‡ºæ–‡ä»¶å
- **æ—§**: `output.tsv`
- **æ–°**: `output_functions.tsv`
- **æ˜Žç»†è¡¨**: `output_potential_symbionts.tsv` (ä¿æŒä¸å˜)

---

## ðŸ“Š æ–°åˆ—ç»“æž„

```
Function | Final_Score_Sum | Total_RA_Pct | Mean_Confidence | Mean_Host_Match |
Mean_Evidence_Weight | Taxa_Count | Probability | Dominant_Contributor
                                                    â†‘
                                                  æ–°å¢žåˆ—
```

---

## ðŸ§® Probability è®¡ç®—å…¬å¼

```
Probability = Base_Prob Ã— Confidence_Factor Ã— Host_Factor Ã— Evidence_Factor Ã— Taxa_Factor

å…¶ä¸­:
- Base_Prob = sigmoid(RA%)  # åŸºäºŽç›¸å¯¹ä¸°åº¦
- Confidence_Factor = 0.9 + (Mean_Confidence Ã— 0.2)
- Host_Factor = 0.95 + ((Mean_Host_Match - 1.0) Ã— 0.1)
- Evidence_Factor = 0.95 + ((Mean_Evidence_Weight - 1.0) Ã— 0.1)
- Taxa_Factor = 1.0 + (log10(Taxa_Count + 1) Ã— 0.05)
```

---

## ðŸ“ˆ Probability è§£è¯»

| æ¦‚çŽ‡èŒƒå›´ | ç­‰çº§ | å»ºè®® |
|---------|------|------|
| 0.90 - 1.00 | æžé«˜ | é«˜ç½®ä¿¡åº¦ï¼Œå¯ç›´æŽ¥ä½¿ç”¨ |
| 0.75 - 0.89 | é«˜ | è¾ƒé«˜ç½®ä¿¡åº¦ï¼ŒæŽ¨èä½¿ç”¨ |
| 0.50 - 0.74 | ä¸­ç­‰ | ä¸­ç­‰ç½®ä¿¡åº¦ï¼Œå»ºè®®éªŒè¯ |
| 0.30 - 0.49 | ä½Ž | ä½Žç½®ä¿¡åº¦ï¼Œéœ€è¿›ä¸€æ­¥éªŒè¯ |
| 0.00 - 0.29 | æžä½Ž | è°¨æ…Žä½¿ç”¨ï¼Œå¯èƒ½ä¸ºå‡é˜³æ€§ |

---

## ðŸ§ª æµ‹è¯•ç»“æžœ

```
Function                    Probability  Total_RA_Pct  Taxa_Count
other                       1.000        15.767        173
pesticide metabolization    0.973        14.098        150
pathogen resistance         0.867        10.491        183
antimicrobial activity      0.843        9.868         198
```

âœ… é«˜ä¸°åº¦åŠŸèƒ½æ¦‚çŽ‡æŽ¥è¿‘ 1.0
âœ… ä¸­ç­‰ä¸°åº¦åŠŸèƒ½æ¦‚çŽ‡åœ¨ 0.85-0.97
âœ… è®¡ç®—é€»è¾‘æ­£å¸¸å·¥ä½œ

---

## ðŸ“š æ–‡æ¡£

**è¯¦ç»†æ–‡æ¡£**: `isympred/predictors/s16_predictor_v2.1_PROBABILITY.md`

åŒ…å«:
- å®Œæ•´è®¡ç®—å…¬å¼æŽ¨å¯¼
- å‚æ•°è°ƒä¼˜å»ºè®®
- ä½¿ç”¨ç¤ºä¾‹å’Œç­›é€‰ç­–ç•¥
- ç§‘å­¦ä¾æ®è¯´æ˜Ž

---

## ðŸ’¡ ä½¿ç”¨å»ºè®®

### ç­›é€‰é«˜å¯ä¿¡åº¦åŠŸèƒ½
```python
import pandas as pd

df = pd.read_csv('results_functions.tsv', sep='\t')

# é«˜å¯ä¿¡åº¦åŠŸèƒ½
high_conf = df[
    (df['Probability'] >= 0.75) &
    (df['Final_Score_Sum'] > 200)
]

# éœ€è¦éªŒè¯çš„åŠŸèƒ½
need_validation = df[
    (df['Probability'] >= 0.50) &
    (df['Probability'] < 0.75)
]
```

---

**ç‰ˆæœ¬**: v2.1
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•
